---
toc_min_heading_level: 2
toc_max_heading_level: 2
---

# putFile

## 功能介绍

:::info 说明

独立上传文件到初始化 sdk 的 objectStorage（发送多媒体消息不需调用此函数，其在 sdk 内部自动上传）查找本地消息

:::

:::caution 注意

:::

<Tabs
groupId="sdks-language"
values={[
{ label: 'iOS', value: 'iOS', },
{ label: 'Android', value: 'Android', },
{ label: 'Flutter', value: 'Flutter', },
{ label: 'uni-app', value: 'uni-app', },
{ label: 'Web', value: 'Web', },
]
}>

<TabItem value="Flutter">

### 函数原型

```dart showLineNumbers
 Future putFile({
    required String putID,
    required String filePath,
    required String fileName,
    String? operationID,
  })

```

### 输入参数

| 参数名称 | 参数类型 | 是否必填    | 描述                 |
| -------- | -------- | ----------- | -------------------- |
| fullPath | String   | 是          | 文件在本机的完整路径 |
| putID    | String   | 是          | 上传的唯一 ID        |
| name     | String   | 是 文件名字 |

### 返回结果

| 名称 | 类型   | 描述                 |
| ---- | ------ | -------------------- |
| ~    | String | 返回"{"url":"xxxx"}" |

### 代码示例

```dart showLineNumbers
final result = await OpenIM.iMManager.putFile(
        putID: const Uuid().v4(),
        filePath: path,
        fileName: path,
      );
      if (result is String) {
            final url = jsonDecode(result)['url'];
            Logger.print('url:$url');
       }
```

</TabItem>

<TabItem value="iOS">

### 函数原型

```swift showLineNumbers

- (void)putFile:(NSString *)fullPath
          putID:(NSString * _Nullable)putID
           name:(NSString * _Nullable)name
        onStart:(OIMPutStartCallback)onStart
     onProgress:(OIMProgressCallback)onProgress
   onCompletion:(OIMPutCompletionCallback)onCompletion
      onSuccess:(OIMSuccessCallback)onSuccess
      onFailure:(OIMFailureCallback)onFailure;

```

### 输入参数

| 参数名称 | 参数类型 | 是否必填 | 描述                 |
| -------- | -------- | -------- | -------------------- |
| fullPath | NSString | 是       | 文件在本机的完整路径 |
| putID    | NSString | 否       | 上传的唯一 ID        |
| name     | NSString | 否       | 文件名字             |

### 返回结果

| 名称         | 类型                                                   | 描述     |
| ------------ | ------------------------------------------------------ | -------- |
| onStart      | OIMPutStartCallback                                    | 上传开始 |
| onProgress   | NSInteger                                              | 上传进度 |
| onCompletion | OIMPutCompletionCallback                               | 上传完成 |
| onSuccess    | [OIMSuccessCallback](docs/sdks/callback/onSuccess.mdx) | 成功返回 |
| onFailure    | [OIMFailureCallback](docs/sdks/callback/onError.mdx)   | 失败返回 |

### 代码示例

```swift showLineNumbers

[OIMManager.manager putFile:@""
                          putID:nil
                           name:nil
                        onStart:^(NSInteger currentBytes, NSInteger totalBytes) {

} onProgress:^(NSInteger saveBytes, NSInteger currentBytes, NSInteger totalBytes) {

} onCompletion:^(NSInteger totalBytes, NSInteger putType) {

} onSuccess:^(NSString * _Nullable data) {

} onFailure:^(NSInteger code, NSString * _Nullable msg) {

}];

```

</TabItem>

<TabItem value="Android">

### 函数原型

```dart showLineNumbers
    public void uploadFile(OnBase<String> base, OnPutFileListener listener,
                           PutArgs putArgs)
```

### 输入参数

PutArgs 实体必传下面两个参数
| 参数名称 | 参数类型 | 是否必填 | 描述 |
| -------- | -------- | -------- | -------------------- |
| fullPath | String | 是 | 文件在本机的完整路径 |
| putID | String | 是 | 上传的唯一 ID |

### 代码示例

```dart showLineNumbers
     OpenIMClient.getInstance().uploadFile(new OnBase<String>() {
            @Override
            public void onError(int code, String error) {

            }

            @Override
            public void onSuccess(String data) {

            }
        }, new OnPutFileListener() {
            @Override
            public void hashComplete(String hash, long total) {

            }

            @Override
            public void hashProgress(long current, long total) {

            }

            @Override
            public void open(long size) {

            }

            @Override
            public void putComplete(long total, long putType) {

            }

            @Override
            public void putProgress(long save, long current, long total) {

            }

            @Override
            public void putStart(long current, long total) {

            }
        },putArgs);
```

</TabItem>

<TabItem value="Web">

### 参数详解

</TabItem>

<TabItem value="uni-app">

### 参数详解

</TabItem>

</Tabs>
