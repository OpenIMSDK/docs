---
sidebar_position: 12
title: 查询消息
hide_title: true
---

<center>

## 查询消息

</center>

### 简要描述
- 搜索消息，支持分页。
### 请求方式
- `post` 
### 请求URL
- `http://x.x.x.x:10002/msg/search_msg` 


### Header
|header名|示例值|选填|类型|说明|
|:----    |:-------    |:--- |---|------      |
|operationID|1646445464564|必填|string|operationID用于全局链路追踪|
|token|eyJhbxxxx3Xs|必填|string|管理员token|


### 请求参数示例


```json
{
  "sendID": "",
  "recvID": "",
  "msgType": 0,
  "sendTime": "",
  "sessionType": 1,
  "pagination": {
    "pagenumber": 1,
    "showNumber": 10
  }
}
```
|字段名|选填|类型|说明|
|:----    |:-------    |:--- |---|
|sendID|选填|string|发送者ID|
|recvID|选填|string|接收者ID|
|msgType|选填|string|消息类型|
|sendTime|选填|string|发送时间|
|sessionType|选填|string|会话类型|
|pagination|必填|object||
|pagination.pagenumber|必填|string|分页 0开始|
|pagination.showNumber|必填|string|每页数量|
### 成功返回示例


```json
{
  "errCode": 0,
  "errMsg": "",
  "errDlt": "",
  "data": {
    "chatLogs": [
      {
        "serverMsgID": "946db72dccc4dd74e2831e0dd7f5bf1e",
        "clientMsgID": "016159d9684fa181c525afd06d0f8cc7",
        "sendID": "5855361412",
        "recvID": "1126971029",
        "groupID": "",
        "recvNickname": "的ss你我",
        "senderPlatformID": 0,
        "senderNickname": "客人",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 200,
        "contentType": 1201,
        "content": "{\"detail\":\"{\\\"fromToUserID\\\":{\\\"fromUserID\\\":\\\"1126971029\\\",\\\"toUserID\\\":\\\"5855361412\\\"},\\\"handleMsg\\\":\\\"\\\"}\"}",
        "status": 0,
        "sendTime": 1690459824302,
        "createTime": 1690459824301,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 1,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "fc956b77f1e7474fa7957ad864af56fb",
        "clientMsgID": "c2d2e1ac23455bd7825fbd4861eef5c9",
        "sendID": "1126971029",
        "recvID": "5855361412",
        "groupID": "",
        "recvNickname": "客人",
        "senderPlatformID": 2,
        "senderNickname": "ss",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 101,
        "content": "{\"content\":\"毕不男不女\"}",
        "status": 1,
        "sendTime": 1690512458446,
        "createTime": 1690512457729,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 2,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "6f8cb2cf9beb596325b89e4e8b813650",
        "clientMsgID": "8a8c463c0c130b0ed05227acc7ce2cf9",
        "sendID": "1126971029",
        "recvID": "5855361412",
        "groupID": "",
        "recvNickname": "客人",
        "senderPlatformID": 2,
        "senderNickname": "ss",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 101,
        "content": "{\"content\":\"bb\"}",
        "status": 1,
        "sendTime": 1690512524528,
        "createTime": 1690512523907,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 3,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "f8829a0afa37f4b563ce1061742c3f78",
        "clientMsgID": "c579ea3186f37bc145c9987e919f6680",
        "sendID": "1126971029",
        "recvID": "5855361412",
        "groupID": "",
        "recvNickname": "客人",
        "senderPlatformID": 2,
        "senderNickname": "ss你",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 101,
        "content": "{\"content\":\"想\"}",
        "status": 1,
        "sendTime": 1690513211341,
        "createTime": 1690513210724,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 4,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "ec39d9d243f947be8e13e90214856ff1",
        "clientMsgID": "51ccebee0b33c715c955681d5efeac56",
        "sendID": "1126971029",
        "recvID": "5855361412",
        "groupID": "",
        "recvNickname": "客人",
        "senderPlatformID": 2,
        "senderNickname": "的ss你我",
        "senderFaceURL": "http://43.154.157.177:10002/object/1126971029/data/user/0/cn.rentsoft.openim.flutter.base.open/cache/image_cropper_1690513226705.jpg",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 2101,
        "content": "{\"detail\":\"{\\\"revokerID\\\":\\\"1126971029\\\",\\\"revokerRole\\\":0,\\\"clientMsgID\\\":\\\"51ccebee0b33c715c955681d5efeac56\\\",\\\"revokerNickname\\\":\\\"的ss你我\\\",\\\"revokeTime\\\":1690536346006,\\\"sourceMessageSendTime\\\":1690513240525,\\\"sourceMessageSendID\\\":\\\"1126971029\\\",\\\"sourceMessageSenderNickname\\\":\\\"的ss你我\\\",\\\"sessionType\\\":1,\\\"seq\\\":5,\\\"ex\\\":\\\"\\\"}\"}",
        "status": 1,
        "sendTime": 1690513240525,
        "createTime": 1690513239901,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 5,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "c883f338179325de9f5e1ba5e584e18d",
        "clientMsgID": "3ebb0d9f681745c56dafd3d916c3a705",
        "sendID": "5855361412",
        "recvID": "1126971029",
        "groupID": "",
        "recvNickname": "",
        "senderPlatformID": 0,
        "senderNickname": "客人",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 200,
        "contentType": 1201,
        "content": "{\"detail\":\"{\\\"fromToUserID\\\":{\\\"fromUserID\\\":\\\"1126971029\\\",\\\"toUserID\\\":\\\"5855361412\\\"},\\\"handleMsg\\\":\\\"\\\"}\"}",
        "status": 0,
        "sendTime": 1690513340454,
        "createTime": 1690513340453,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 6,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "2f2123345ba26a31188e9e081554fea3",
        "clientMsgID": "7ff238c5ff23c641e3c7135a10a9ccaf",
        "sendID": "5855361412",
        "recvID": "1126971029",
        "groupID": "",
        "recvNickname": "",
        "senderPlatformID": 0,
        "senderNickname": "客人",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 200,
        "contentType": 1201,
        "content": "{\"detail\":\"{\\\"fromToUserID\\\":{\\\"fromUserID\\\":\\\"1126971029\\\",\\\"toUserID\\\":\\\"5855361412\\\"},\\\"handleMsg\\\":\\\"\\\"}\"}",
        "status": 0,
        "sendTime": 1690513371446,
        "createTime": 1690513371446,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 7,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "54f7f33b3ab76d3cd8b4391ff3210cf7",
        "clientMsgID": "c11f59a6672732f3c8fde5012ee6af41",
        "sendID": "1126971029",
        "recvID": "5855361412",
        "groupID": "",
        "recvNickname": "客人",
        "senderPlatformID": 2,
        "senderNickname": "的ss你我",
        "senderFaceURL": "http://43.154.157.177:10002/object/1126971029/data/user/0/cn.rentsoft.openim.flutter.base.open/cache/image_cropper_1690513226705.jpg",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 101,
        "content": "{\"content\":\"bbbb\"}",
        "status": 1,
        "sendTime": 1690514316001,
        "createTime": 1690514315382,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 8,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "aca620a221e01f823a0d439cd48d14db",
        "clientMsgID": "468a9eba8e6e0580e68d4f57027b540a",
        "sendID": "5855361412",
        "recvID": "1126971029",
        "groupID": "",
        "recvNickname": "的ss你我",
        "senderPlatformID": 2,
        "senderNickname": "客人",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 101,
        "content": "{\"content\":\"哈哈\"}",
        "status": 1,
        "sendTime": 1690514787336,
        "createTime": 1690514786761,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 9,
        "groupOwner": "",
        "groupType": 0
      },
      {
        "serverMsgID": "75ce151c35eebe59a5ddd614cf04966f",
        "clientMsgID": "95c6dca35593d0c6b4d94be25e84bae4",
        "sendID": "5855361412",
        "recvID": "1126971029",
        "groupID": "",
        "recvNickname": "的ss你我",
        "senderPlatformID": 2,
        "senderNickname": "客人",
        "senderFaceURL": "",
        "groupName": "",
        "sessionType": 1,
        "msgFrom": 100,
        "contentType": 101,
        "content": "{\"content\":\"哈哈\"}",
        "status": 1,
        "sendTime": 1690536911213,
        "createTime": 1690536910484,
        "ex": "",
        "groupFaceURL": "",
        "groupMemberCount": 0,
        "seq": 10,
        "groupOwner": "",
        "groupType": 0
      }
    ],
    "chatLogsNum": 26758
  }
}
```
### 成功返回示例的参数说明


|参数名|类型|说明|
|:----    |:-------    |:--- |
|errCode|int|错误码,0表示成功|
|errMsg|string|错误简要信息,无错误时为空|
|errDlt|errDlt|错误详细信息,无错误时为空|
|data|object|通用数据对象，具体结构见下方|
|chatLogs|array||
|chatLogs.serverMsgID|string|服务器消息ID|
|chatLogs.clientMsgID|string|客户端消息ID|
|chatLogs.sendID|string|发送者ID|
|chatLogs.recvID|string|接收者ID|
|chatLogs.groupID|string|群组ID|
|chatLogs.recvNickname|string|接收者昵称|
|chatLogs.senderPlatformID|string|发送者平台|
|chatLogs.senderNickname|string|发送者昵称|
|chatLogs.senderFaceURL|string|发送者头像|
|chatLogs.groupName|string|群名称|
|chatLogs.sessionType|string|会话类型，发送的消息是单聊还是群聊,单聊为1，群聊（普通写扩散）为2,大群(读扩散接口)为3，通知会话为4|
|chatLogs.msgFrom|string|消息来源，100来源于用户发送，200来源于管理员发送或者系统广播通知等|
|chatLogs.contentType|string|消息类型，101表示文本，102表示图片..详细参考消息类型格式描述文档|
|chatLogs.content|string|内容|
|chatLogs.status|string|消息状态|
|chatLogs.sendTime|string|发送时间|
|chatLogs.createTime|string|创建时间|
|chatLogs.ex|string|扩展字段|
|chatLogs.groupFaceURL|string|群头像|
|chatLogs.groupMemberCount|string|群成员数量|
|chatLogs.seq|string|消息唯一序列号ID|
|chatLogs.groupOwner|string|群主|
|chatLogs.groupType|string|群类型|
|chatLogsNum|string|消息数量|
### 失败返回示例


```json
{
  "errCode": 1004,
  "errMsg": "RecordNotFoundError",
  "errDlt": ": [1004]RecordNotFoundError"
}
```
### 失败返回示例的参数说明


|参数名|类型|说明|
|:----    |:-------    |:--- |
|errCode|int|错误码,具体查看全局错误码文档|
|errMsg|string|错误简要信息|
|errDlt|errDlt|错误详细信息|
