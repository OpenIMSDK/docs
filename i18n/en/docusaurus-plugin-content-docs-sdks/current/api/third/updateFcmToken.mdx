---
sidebar_position: 4
toc_min_heading_level: 2
toc_max_heading_level: 2
---

# updateFcmToken

## Function Introduction

:::info Note

Updates the Firebase user token on the IM server.

:::

:::caution Warning
(1) This interface is used to set or refresh the Firebase user token. An expiration time can be specified, and it is only effective when the server's offline push is set to Firebase.

:::

<Tabs
groupId="sdks-language"
values={[
{ label: 'iOS', value: 'iOS', },
{ label: 'Android', value: 'Android', },
{ label: 'Flutter', value: 'Flutter', },
{ label: 'Browser/Electron/MiniProgram', value: 'Web', },
{ label: 'uni-app', value: 'uni-app', },
{ label: 'React-Native', value: 'React-Native', },
]
}>

<TabItem value="Flutter">

### Function Prototype

```dart showLineNumbers
Future updateFcmToken({
    required String fcmToken,
    required int expireTime,
    String? operationID,
});
```

### Input Parameters

| Parameter Name  | Parameter Type | Required | Description                   |
| ----------------| ----------------| -------- | ------------------------------|
| fcmToken        | String          | Yes      | FCM Token                     |
| expireTime      | int             | Yes      | FCM Token expiration time, in seconds |

### Return Result

| Parameter Name  | Parameter Type | Description         |
| ----------------| ----------------| --------------------|
| then            | void            | Success callback     |
| onError         | Function        | Failure callback     |

### Code Example

```dart showLineNumbers
OpenIM.iMManager.updateFcmToken(fcmToken: '', expireTime: );
```

</TabItem>

<TabItem value="iOS">

### Function Prototype

```swift showLineNumbers

- (void)updateFcmToken:(NSString *)fcmToken 
            expireTime:(NSInteger )expireTime
             onSuccess:(nullable OIMSuccessCallback)onSuccess
             onFailure:(nullable OIMFailureCallback)onFailure;

```

### Input Parameters

| Parameter Name  | Parameter Type | Required | Description                   |
| ----------------| ----------------| -------- | ------------------------------|
| fcmToken        | NSString        | Yes      | FCM Token                     |
| expireTime      | int             | Yes      | FCM Token expiration time, in seconds |

### Return Result

| Name      | Type                           | Description     |
| --------- | ------------------------------ | ---------------- |
| onSuccess | OIMSuccessCallback             | Success return   |
| onFailure | OIMFailureCallback             | Failure return   |

### Code Example

```swift showLineNumbers

[OIMManager.manager updateFcmToken:@"" 
                        expireTime: 
                      onSuccess:^(NSString * _Nullable data) {

} onFailure:^(NSInteger code, NSString * _Nullable msg) {

}];

```

</TabItem>

<TabItem value="Android">

### Parameter Details

| Parameter Name  | Description                 |
| ----------------| ----------------------------|
| fcmToken        | FCM Token                  |
| expireTime      | FCM Token expiration time, in seconds |

### Code Example

```java showLineNumbers
OIMManager.getInstance().updateFcmToken(fcmToken, expireTime, new OIMSuccessCallback() {
    @Override
    public void onSuccess(String data) {
        // handle success
    }
}, new OIMFailureCallback() {
    @Override
    public void onFailure(int code, String msg) {
        // handle failure
    }
});
```

</TabItem>

<TabItem value="Web">

### Parameter Details

| Parameter Name  | Description                 |
| ----------------| ----------------------------|
| fcmToken        | FCM Token                  |
| expireTime      | FCM Token expiration time, in seconds |

### Code Example

```javascript showLineNumbers
updateFcmToken(fcmToken, expireTime)
    .then(data => {
        // handle success
    })
    .catch(err => {
        // handle failure
    });
```

</TabItem>

<TabItem value="uni-app">

### Function Prototype

```javascript showLineNumbers
function updateFcmToken(fcmToken, expireTime) {
    // implementation
}
```

### Input Parameters

| Parameter Name  | Description                 |
| ----------------| ----------------------------|
| fcmToken        | FCM Token                  |
| expireTime      | FCM Token expiration time, in seconds |

### Code Example

```javascript showLineNumbers
updateFcmToken(fcmToken, expireTime)
    .then(data => {
        // handle success
    })
    .catch(err => {
        // handle failure
    });
```

</TabItem>

<TabItem value="React-Native">

### Function Prototype

```javascript showLineNumbers
function updateFcmToken(fcmToken, expireTime) {
    // implementation
}
```

### Input Parameters

| Parameter Name  | Description                 |
| ----------------| ----------------------------|
| fcmToken        | FCM Token                  |
| expireTime      | FCM Token expiration time, in seconds |

### Code Example

```javascript showLineNumbers
updateFcmToken(fcmToken, expireTime)
    .then(data => {
        // handle success
    })
    .catch(err => {
        // handle failure
    });
```

</TabItem>

</Tabs>