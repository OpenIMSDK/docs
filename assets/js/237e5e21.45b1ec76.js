"use strict";(self.webpackChunkopenim_docs=self.webpackChunkopenim_docs||[]).push([[91571],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>g});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=s(n),u=a,g=c["".concat(p,".").concat(u)]||c[u]||d[u]||r;return n?o.createElement(g,i(i({ref:t},m),{},{components:n})):o.createElement(g,i({ref:t},m))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},56299:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>c});n(67294);var o=n(3905);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const l={title:"Source Code Deployment",sidebar_position:1},p="\ud83d\udee0 Source Code Deployment",s={unversionedId:"gettingStarted/imSourceCodeDeployment",id:"gettingStarted/imSourceCodeDeployment",title:"Source Code Deployment",description:"1. Environment and Component Requirements",source:"@site/i18n/en/docusaurus-plugin-content-docs-guides/current/gettingStarted/imSourceCodeDeployment.mdx",sourceDirName:"gettingStarted",slug:"/gettingStarted/imSourceCodeDeployment",permalink:"/guides/gettingStarted/imSourceCodeDeployment",draft:!1,editUrl:"https://github.com/OpenIMSDK/docs/tree/main/docs/guides/gettingStarted/imSourceCodeDeployment.mdx",tags:[],version:"current",lastUpdatedAt:1724417933,formattedLastUpdatedAt:"Aug 23, 2024",sidebarPosition:1,frontMatter:{title:"Source Code Deployment",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Product Introduction",permalink:"/guides/introduction/product"},next:{title:"Docker Deployment for OpenIM",permalink:"/guides/gettingStarted/dockerCompose"}},m={},c=[{value:"1. Environment and Component Requirements",id:"1-environment-and-component-requirements",level:2},{value:"2. Deploying OpenIM Server (IM)",id:"2-deploying-openim-server-im",level:2},{value:"2.1 Clone the Repository (Switch to the <code>release-v3.8</code> branch)",id:"21-clone-the-repository-switch-to-the-release-v38-branch",level:3},{value:"2.2 Deploy Components (MongoDB/Redis/Zookeeper/Kafka/MinIO, etc.)",id:"22-deploy-components-mongodbrediszookeeperkafkaminio-etc",level:3},{value:"2.3 Set External IP or Domain Name Refer to Nginx Configuration",id:"23-set-external-ip-or-domain-name-refer-to-nginx-configuration",level:3},{value:"2.4 \ud83d\udee0\ufe0f Initialization",id:"24-\ufe0f-initialization",level:3},{value:"2.5 \ud83d\udee0\ufe0f Compilation (Linux/Windows/macOS)",id:"25-\ufe0f-compilation-linuxwindowsmacos",level:3},{value:"2.6 \ud83d\ude80 Start/Stop/Check (Linux/Windows/macOS)",id:"26--startstopcheck-linuxwindowsmacos",level:3},{value:"2.7 Modify Other Configuration Items",id:"27-modify-other-configuration-items",level:3},{value:"3. Deploying App Server (Chat)",id:"3-deploying-app-server-chat",level:2},{value:"3.1 Clone the Repository (Switch to the <code>release-v1.8</code> branch)",id:"31-clone-the-repository-switch-to-the-release-v18-branch",level:3},{value:"3.2 \ud83d\udee0\ufe0f Initialization",id:"32-\ufe0f-initialization",level:3},{value:"3.3 \ud83d\udee0\ufe0f Compilation (Linux/Windows/macOS)",id:"33-\ufe0f-compilation-linuxwindowsmacos",level:3},{value:"3.4 \ud83d\ude80 Start/Stop/Check (Linux/Windows/macOS)",id:"34--startstopcheck-linuxwindowsmacos",level:3},{value:"3.5 Modify Other Configuration Items",id:"35-modify-other-configuration-items",level:3},{value:"Previous Versions (Release v3.6 and Before)",id:"previous-versions-release-v36-and-before",level:2},{value:"2. Deploy OpenIM Server (IM)",id:"2-deploy-openim-server-im",level:2},{value:"2.1 \ud83d\udce1 Set <code>OPENIM_IP</code>",id:"21--set-openim_ip",level:3},{value:"2.2 \ud83c\udfd7\ufe0f Deploy Components (MongoDB/Redis/Zookeeper/Kafka/MinIO, etc.)",id:"22-\ufe0f-deploy-components-mongodbrediszookeeperkafkaminio-etc",level:3},{value:"2.3 \ud83d\udee0\ufe0f Compilation",id:"23-\ufe0f-compilation",level:3},{value:"2.4 \ud83d\ude80 Start/Stop/Check",id:"24--startstopcheck",level:3},{value:"3. Deploy App Server (Chat)",id:"3-deploy-app-server-chat",level:2},{value:"3.1 \ud83c\udfd7\ufe0f Clone Chat Repository",id:"31-\ufe0f-clone-chat-repository",level:3},{value:"3.2 \ud83d\udee0\ufe0f Compilation",id:"32-\ufe0f-compilation",level:3},{value:"3.3 \ud83d\ude80 Start/Stop/Check",id:"33--startstopcheck",level:3},{value:"4. Quick Test",id:"4-quick-test",level:2},{value:"5. Admin Panel and Monitoring System",id:"5-admin-panel-and-monitoring-system",level:2},{value:"6. Configuration Item Changes",id:"6-configuration-item-changes",level:2},{value:"6.1 \ud83d\udee0\ufe0f Modifying Shared Configuration Items",id:"61-\ufe0f-modifying-shared-configuration-items",level:3},{value:"6.2 \ud83d\udd04 Modifying Special Shared Configuration Items",id:"62--modifying-special-shared-configuration-items",level:3},{value:"6.3 \ud83d\udee0\ufe0f Modifying Other Configuration Items",id:"63-\ufe0f-modifying-other-configuration-items",level:3},{value:"6.4 Modifying Ports",id:"64-modifying-ports",level:3},{value:"7. Common Issues",id:"7-common-issues",level:2},{value:"7.1 \ud83d\udcdc Log Viewing",id:"71--log-viewing",level:3},{value:"7.2 \ud83d\ude80 Startup Order",id:"72--startup-order",level:3},{value:"7.3 \ud83d\udc33 Docker Version",id:"73--docker-version",level:3}],d={toc:c},u="wrapper";function g(e){var{components:t}=e,n=i(e,["components"]);return(0,o.kt)(u,r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){a(e,t,n[t])}))}return e}({},d,n),{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"-source-code-deployment"},"\ud83d\udee0 Source Code Deployment"),(0,o.kt)("h2",{id:"1-environment-and-component-requirements"},"1. Environment and Component Requirements"),(0,o.kt)("p",null,"For information on server environment, system, and dependencies, refer to ",(0,o.kt)("a",{parentName:"p",href:"./env-comp"},"this document"),"."),(0,o.kt)("h2",{id:"2-deploying-openim-server-im"},"2. Deploying OpenIM Server (IM)"),(0,o.kt)("h3",{id:"21-clone-the-repository-switch-to-the-release-v38-branch"},"2.1 Clone the Repository (Switch to the ",(0,o.kt)("inlineCode",{parentName:"h3"},"release-v3.8")," branch)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/openimsdk/open-im-server && cd open-im-server\n")),(0,o.kt)("h3",{id:"22-deploy-components-mongodbrediszookeeperkafkaminio-etc"},"2.2 Deploy Components (MongoDB/Redis/Zookeeper/Kafka/MinIO, etc.)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose up -d\n")),(0,o.kt)("h3",{id:"23-set-external-ip-or-domain-name-refer-to-nginx-configuration"},"2.3 Set External IP or Domain Name ",(0,o.kt)("a",{parentName:"h3",href:"/guides/gettingStarted/nginxDomainConfig"},"Refer to Nginx Configuration")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Modify the `externalAddress` field in `config/minio.yml` to `http://external_IP:port` or `domain_name`.\nModify `grafanaURL` in `config/openim-api.yml` from `http://127.0.0.1:13000/` to `http://external_IP:port` or `domain_name`.\n")),(0,o.kt)("h3",{id:"24-\ufe0f-initialization"},"2.4 \ud83d\udee0\ufe0f Initialization"),(0,o.kt)("p",null,"Before compiling for the first time, execute the following commands:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"For Linux/macOS:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bash bootstrap.sh\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"For Windows:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bootstrap.bat\n")),(0,o.kt)("h3",{id:"25-\ufe0f-compilation-linuxwindowsmacos"},"2.5 \ud83d\udee0\ufe0f Compilation (Linux/Windows/macOS)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mage\n")),(0,o.kt)("h3",{id:"26--startstopcheck-linuxwindowsmacos"},"2.6 \ud83d\ude80 Start/Stop/Check (Linux/Windows/macOS)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Start\nmage start\n# Start in background and collect logs\nnohup mage start >> _output/logs/openim.log 2>&1 &\n# Stop\nmage stop\n# Check\nmage check\n")),(0,o.kt)("h3",{id:"27-modify-other-configuration-items"},"2.7 Modify Other Configuration Items"),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/openimsdk/open-im-server/blob/main/config/README.md"},"configuration README"),"."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"3-deploying-app-server-chat"},"3. Deploying App Server (Chat)"),(0,o.kt)("h3",{id:"31-clone-the-repository-switch-to-the-release-v18-branch"},"3.1 Clone the Repository (Switch to the ",(0,o.kt)("inlineCode",{parentName:"h3"},"release-v1.8")," branch)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/openimsdk/chat && cd chat\n")),(0,o.kt)("h3",{id:"32-\ufe0f-initialization"},"3.2 \ud83d\udee0\ufe0f Initialization"),(0,o.kt)("p",null,"Before compiling for the first time:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"For Linux/macOS:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bash bootstrap.sh\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"For Windows:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bootstrap.bat\n")),(0,o.kt)("h3",{id:"33-\ufe0f-compilation-linuxwindowsmacos"},"3.3 \ud83d\udee0\ufe0f Compilation (Linux/Windows/macOS)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mage\n")),(0,o.kt)("h3",{id:"34--startstopcheck-linuxwindowsmacos"},"3.4 \ud83d\ude80 Start/Stop/Check (Linux/Windows/macOS)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Start\nmage start\n# Start in background and collect logs\nnohup mage start >> _output/logs/chat.log 2>&1 &\n# Stop\nmage stop\n# Check\nmage check\n")),(0,o.kt)("h3",{id:"35-modify-other-configuration-items"},"3.5 Modify Other Configuration Items"),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/openimsdk/chat/blob/main/config/README.md"},"configuration README"),"."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"previous-versions-release-v36-and-before"},"Previous Versions (Release v3.6 and Before)"),(0,o.kt)("h2",{id:"2-deploy-openim-server-im"},"2. Deploy OpenIM Server (IM)"),(0,o.kt)("h3",{id:"21--set-openim_ip"},"2.1 \ud83d\udce1 Set ",(0,o.kt)("inlineCode",{parentName:"h3"},"OPENIM_IP")),(0,o.kt)("p",null,"\ud83d\udd14 ",(0,o.kt)("strong",{parentName:"p"},"You must set ",(0,o.kt)("inlineCode",{parentName:"strong"},"OPENIM_IP"),", and it cannot be ",(0,o.kt)("inlineCode",{parentName:"strong"},"127.0.0.1"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'# If the server has an external IP\nexport OPENIM_IP="external IP"\n\n# If only providing internal services\nexport OPENIM_IP="internal IP"\n')),(0,o.kt)("h3",{id:"22-\ufe0f-deploy-components-mongodbrediszookeeperkafkaminio-etc"},"2.2 \ud83c\udfd7\ufe0f Deploy Components (MongoDB/Redis/Zookeeper/Kafka/MinIO, etc.)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/OpenIMSDK/open-im-server && cd open-im-server\n# Switch to the release-v3.6 or later release branch\nmake init && docker compose up -d\n")),(0,o.kt)("h3",{id:"23-\ufe0f-compilation"},"2.3 \ud83d\udee0\ufe0f Compilation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"make build\n")),(0,o.kt)("h3",{id:"24--startstopcheck"},"2.4 \ud83d\ude80 Start/Stop/Check"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Start\nmake start\n# Stop\nmake stop\n# Check\nmake check\n")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"3-deploy-app-server-chat"},"3. Deploy App Server (Chat)"),(0,o.kt)("h3",{id:"31-\ufe0f-clone-chat-repository"},"3.1 \ud83c\udfd7\ufe0f Clone Chat Repository"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Go back to the previous directory\ncd ..\n# Clone the repository, switch to the release-v1.6 or later release branch\ngit clone https://github.com/OpenIMSDK/chat chat && cd chat\n")),(0,o.kt)("h3",{id:"32-\ufe0f-compilation"},"3.2 \ud83d\udee0\ufe0f Compilation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"make init\nmake build\n")),(0,o.kt)("h3",{id:"33--startstopcheck"},"3.3 \ud83d\ude80 Start/Stop/Check"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Start\nmake start\n# Stop\nmake stop\n# Check\nmake check\n")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"4-quick-test"},"4. Quick Test"),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"./quickTestServer"},"Quick Test")," documentation for more details."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"5-admin-panel-and-monitoring-system"},"5. Admin Panel and Monitoring System"),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"./admin"},"Admin Panel and Monitoring System")," documentation."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"6-configuration-item-changes"},"6. Configuration Item Changes"),(0,o.kt)("h3",{id:"61-\ufe0f-modifying-shared-configuration-items"},"6.1 \ud83d\udee0\ufe0f Modifying Shared Configuration Items"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Configuration Item"),(0,o.kt)("th",{parentName:"tr",align:null},"Files to Modify"),(0,o.kt)("th",{parentName:"tr",align:null},"Action"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Mongo/Kafka/MinIO"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},".env"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"openim-server/config/config.yaml")),(0,o.kt)("td",{parentName:"tr",align:null},"Restart components and IM")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Redis/Zookeeper"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},".env"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"openim-server/config/config.yaml"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"chat/config/config.yaml")),(0,o.kt)("td",{parentName:"tr",align:null},"Restart components, IM, and Chat")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SECRET"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"openim-server/config/config.yaml"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"chat/config/config.yaml")),(0,o.kt)("td",{parentName:"tr",align:null},"Restart IM and Chat")))),(0,o.kt)("h3",{id:"62--modifying-special-shared-configuration-items"},"6.2 \ud83d\udd04 Modifying Special Shared Configuration Items"),(0,o.kt)("p",null,"Special configuration items: ",(0,o.kt)("inlineCode",{parentName:"p"},"API_OPENIM_PORT"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"MINIO_PORT"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"OPENIM_IP"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"GRAFANA_PORT")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Modify these special configuration items in the ",(0,o.kt)("inlineCode",{parentName:"li"},".env")," file."),(0,o.kt)("li",{parentName:"ol"},"Update the settings in ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"openim-server/config/config.yaml"))," according to the rules:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"object:\n  apiURL: 'http://$OPENIM_IP:$API_OPENIM_PORT'\n  minio:\n    endpoint: 'http://$DOCKER_BRIDGE_GATEWAY:$MINIO_PORT'\n    signEndpoint: 'http://$OPENIM_IP:$MINIO_PORT'\n\ngrafanaUrl: http://$OPENIM_IP:$GRAFANA_PORT\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Update the settings in ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"chat/config/config.yaml")),":")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"If IM and Chat are not on the same machine, replace `127.0.0.1` with the IP of the IM machine:\nopenIMUrl: 'http://127.0.0.1:$API_OPENIM_PORT'\n")),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"Restart IM and Chat.")),(0,o.kt)("h3",{id:"63-\ufe0f-modifying-other-configuration-items"},"6.3 \ud83d\udee0\ufe0f Modifying Other Configuration Items"),(0,o.kt)("p",null,"For other configuration items in ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},".env")),", ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"chat/config/config.yaml")),", and ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"openim-server/config/config.yaml")),", modify the corresponding files as needed."),(0,o.kt)("h3",{id:"64-modifying-ports"},"6.4 Modifying Ports"),(0,o.kt)("p",null,"When modifying any IM-related ports, you must also update the ports in ",(0,o.kt)("inlineCode",{parentName:"p"},"open-im-server/scripts/install/environment.sh"),"."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"7-common-issues"},"7. Common Issues"),(0,o.kt)("h3",{id:"71--log-viewing"},"7.1 \ud83d\udcdc Log Viewing"),(0,o.kt)("p",null,"Log locations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Runtime logs: ",(0,o.kt)("inlineCode",{parentName:"li"},"_output/logs/openim-all*")),(0,o.kt)("li",{parentName:"ul"},"Startup logs: ",(0,o.kt)("inlineCode",{parentName:"li"},"_output/logs/openim-*.log"))),(0,o.kt)("h3",{id:"72--startup-order"},"7.2 \ud83d\ude80 Startup Order"),(0,o.kt)("p",null,"The startup order is as follows:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Components that IM depends on: Mongo/Redis/Kafka/Zookeeper/MinIO, etc."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"IM")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Chat"))),(0,o.kt)("h3",{id:"73--docker-version"},"7.3 \ud83d\udc33 Docker Version"),(0,o.kt)("p",null,"Newer versions of Docker have integrated ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose"),". Older versions of Docker may not support the gateway feature\u274c. We recommend upgrading to a newer version, such as ",(0,o.kt)("inlineCode",{parentName:"p"},"23.0.1"),"\ud83d\udd1d."))}g.isMDXComponent=!0}}]);